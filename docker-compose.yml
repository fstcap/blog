version: "3.8"
services:
    gunicorn_flaskr:
        build: .
        image: gunicorn:flaskr
        container_name: "compose-gunicorn-flaskr"
        networks:
            app_net:
                ipv4_address: 172.19.0.2
    nginx:
        image: nginx:latest
        ports:
            - "8080:8080"
        volumes:
            - "$PWD/nginx:/etc/nginx"
        container_name: "compose-nginx"
        networks:
            - app_net
networks:
    app_net:
        ipam:
            config:
                - subnet: 172.19.0.0/16
